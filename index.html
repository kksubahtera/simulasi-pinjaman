<!DOCTYPE html>
<html>
<head>
    <title>Simulasi Pinjaman dengan Pembulatan</title>
    <style>
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: right; }
        th { background-color: #f2f2f2; text-align: center; }
    </style>
</head>
<body>
    <h2>Simulasi Pinjaman</h2>
    
    <div>
        <label>Jumlah Pinjaman (Rp):</label>
        <input type="number" id="pinjaman" value="5000000">
    </div>
    <div>
        <label>Bunga (% per bulan):</label>
        <input type="number" id="bunga" value="2" step="0.01">
    </div>
    <div>
        <label>Tenor (bulan):</label>
        <input type="number" id="tenor" value="12">
    </div>
    <button onclick="hitungAngsuran()">Hitung Angsuran</button>
    
    <h3>Rincian Angsuran</h3>
    <table id="tabelAngsuran">
        <thead>
            <tr>
                <th>Bulan ke-</th>
                <th>Saldo Pinjaman</th>
                <th>Angsuran Pokok</th>
                <th>Bunga</th>
                <th>Total Angsuran</th>
            </tr>
        </thead>
        <tbody id="tbodyAngsuran">
            <!-- Hasil akan muncul di sini -->
        </tbody>
    </table>

    <script>
        function hitungAngsuran() {
            const pinjaman = parseInt(document.getElementById('pinjaman').value);
            const bunga = parseFloat(document.getElementById('bunga').value);
            const tenor = parseInt(document.getElementById('tenor').value);
            
            const tbody = document.getElementById('tbodyAngsuran');
            tbody.innerHTML = '';
            
            let saldo = pinjaman;
            let totalPokok = 0;
            
            // Hitung angsuran pokok dasar (dibulatkan ke 50rb kebawah)
            const pokokDasar = Math.floor(pinjaman / tenor / 50000) * 50000;
            
            // Hitung total sisa yang perlu didistribusikan
            const totalSisa = pinjaman - (pokokDasar * tenor);
            
            // Hitung berapa angsuran perlu ditambah 50rb
            const jumlahTambahan = Math.round(totalSisa / 50000);
            
            for (let i = 1; i <= tenor; i++) {
                const row = document.createElement('tr');
                
                // Tentukan angsuran pokok
                let pokok;
                if (i <= jumlahTambahan) {
                    pokok = pokokDasar + 50000;
                } else if (i === tenor) {
                    pokok = pinjaman - totalPokok;
                } else {
                    pokok = pokokDasar;
                }
                totalPokok += pokok;
                
                // Hitung bunga
                const bungaPerBulan = saldo * bunga / 100;
                
                // Buat baris tabel
                row.innerHTML = `
                    <td>${i}</td>
                    <td>${formatRupiah(saldo)}</td>
                    <td>${formatRupiah(pokok)}</td>
                    <td>${formatRupiah(bungaPerBulan)}</td>
                    <td>${formatRupiah(pokok + bungaPerBulan)}</td>
                `;
                
                tbody.appendChild(row);
                saldo -= pokok;
            }
        }
        
        function formatRupiah(angka) {
            return 'Rp ' + angka.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, '.');
        }
    </script>
</body>
</html>
